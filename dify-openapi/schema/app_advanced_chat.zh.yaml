openapi: 3.0.0
info:
  title: Dify API - 工作流编排对话型应用
  description: |
    Dify API 提供了一系列接口用于工作流编排对话型应用。
    对话应用支持会话持久化，可将之前的聊天记录作为上下文进行回答，可适用于聊天/客服 AI 等。
    所有 API 请求都需要在 Authorization HTTP Header 中包含应用级 API-Key。
    官方原始文档见: https://github.com/langgenius/dify/blob/1.2.0/web/app/components/develop/template/template_advanced_chat.zh.mdx
  version: 1.2.0

servers:
  - url: https://api.dify.ai/v1
    description: Dify API 服务器

  - url: "{api_url}"
    variables:
      api_url:
        default: https://api.dify.ai/v1
        description: 自定义 API 服务器 URL

  - url: http://ai.urchinet.lan/v1
    description: author of dify-openapi dev server

security:
  - bearerApiKeyAuth: []

components:
  securitySchemes:
    bearerApiKeyAuth:
      type: http
      scheme: bearer

  responses:
    Error400:
      description: 请求错误
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

    Error401:
      description: 未授权或授权失败
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

    Error404:
      description: 资源不存在
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

    Error500:
      description: 服务器错误
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

  schemas:
    Error:
      type: object
      properties:
        code:
          type: string
          description: 错误代码
        status:
          type: integer
          description: HTTP 状态码
        message:
          type: string
          description: 错误信息描述
      required:
        - code
        - status
        - message

    Usage:
      type: object
      properties:
        prompt_tokens:
          type: integer
          description: 提示词使用的 token 数量
        completion_tokens:
          type: integer
          description: 补全使用的 token 数量
        total_tokens:
          type: integer
          description: 总共使用的 token 数量
        prompt_unit_price:
          type: string
          description: 提示词单价
        prompt_price_unit:
          type: string
          description: 提示词价格单位
        prompt_price:
          type: string
          description: 提示词总价
        completion_unit_price:
          type: string
          description: 补全单价
        completion_price_unit:
          type: string
          description: 补全价格单位
        completion_price:
          type: string
          description: 补全总价
        total_price:
          type: string
          description: 总价格
        currency:
          type: string
          description: 货币单位
        latency:
          type: number
          description: 延迟时间

    RetrieverResource:
      type: object
      properties:
        position:
          type: integer
          description: 位置
        dataset_id:
          type: string
          description: 数据集ID
        dataset_name:
          type: string
          description: 数据集名称
        document_id:
          type: string
          description: 文档ID
        document_name:
          type: string
          description: 文档名称
        segment_id:
          type: string
          description: 分段ID
        score:
          type: number
          description: 相关度分数
        content:
          type: string
          description: 内容

    BaseMessage:
      type: object
      properties:
        message_id:
          type: string
          description: 消息唯一 ID
        created_at:
          type: integer
          description: 消息创建时间戳
        metadata:
          type: object
          properties:
            usage:
              $ref: "#/components/schemas/Usage"
            retriever_resources:
              type: array
              items:
                $ref: "#/components/schemas/RetrieverResource"

    ChatMessage:
      allOf:
        - $ref: "#/components/schemas/BaseMessage"
        - type: object
          properties:
            conversation_id:
              type: string
              description: 会话ID
            mode:
              type: string
              description: App 模式，固定为 chat
            answer:
              type: string
              description: 完整回复内容

    StreamEvent:
      type: object
      properties:
        event:
          type: string
          enum:
            [
              message,
              message_end,
              tts_message,
              tts_message_end,
              message_replace,
              error,
              ping,
              workflow_started,
              node_started,
              node_finished,
              workflow_finished,
              agent_message,
              agent_thought,
              message_file,
            ]
          description: 事件类型
        task_id:
          type: string
          description: 任务 ID
        message_id:
          type: string
          description: 消息唯一 ID
        conversation_id:
          type: string
          description: 会话 ID
        workflow_run_id:
          type: string
          description: workflow 执行 ID
        answer:
          type: string
          description: 回复内容
        audio:
          type: string
          description: 语音合成音频数据（base64编码）
        data:
          type: object
          description: 事件相关数据
        metadata:
          type: object
          properties:
            usage:
              $ref: "#/components/schemas/Usage"
            retriever_resources:
              type: array
              items:
                $ref: "#/components/schemas/RetrieverResource"
        created_at:
          type: integer
          description: 创建时间戳

    UploadedFile:
      type: object
      properties:
        id:
          type: string
          description: 文件 ID
        name:
          type: string
          description: 文件名
        size:
          type: integer
          description: 文件大小（byte）
        extension:
          type: string
          description: 文件后缀
        mime_type:
          type: string
          description: 文件 mime-type
        created_by:
          type: string
          description: 上传人 ID
        created_at:
          type: integer
          description: 上传时间

    FileInput:
      type: object
      properties:
        type:
          type: string
          enum: [document, image, audio, video, custom]
          description: |
            文件类型：
            - `document` 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'PDF', 'HTML', 'XLSX', 'XLS', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'
            - `image` 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'
            - `audio` 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'AMR'
            - `video` 具体类型包含：'MP4', 'MOV', 'MPEG', 'MPGA'
            - `custom` 具体类型包含：其他文件类型
        transfer_method:
          type: string
          enum: [remote_url, local_file]
          description: |
            传递方式:
            - `remote_url`: 图片地址。
            - `local_file`: 上传文件。
        url:
          type: string
          description: 图片地址。（仅当传递方式为 `remote_url` 时）。
        upload_file_id:
          type: string
          description: 上传文件 ID。（仅当传递方式为 `local_file` 时）。

tags:
  - name: AdvancedChat
    description: 工作流编排对话型应用相关操作

paths:
  /chat-messages:
    post:
      tags:
        - AdvancedChat
      operationId: sendChatMessageByAppAdvancedChat
      summary: 发送对话消息
      description: 创建会话消息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - query
              properties:
                query:
                  type: string
                  description: 用户输入/提问内容
                inputs:
                  type: object
                  description: 允许传入 App 定义的各变量值。inputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。变量可以是文件列表类型。如果该变量是文件列表类型，该变量对应的值应是列表格式，其中每个元素应包含以下内容：type、transfer_method等属性。
                response_mode:
                  type: string
                  enum: [streaming, blocking]
                  description: |
                    响应模式:
                    - streaming: 流式模式（推荐），基于 SSE 实现类似打字机输出
                    - blocking: 阻塞模式，等待执行完毕后返回结果
                user:
                  type: string
                  description: 用户标识
                conversation_id:
                  type: string
                  description: 会话 ID
                files:
                  type: array
                  description: 文件列表，适用于传入文件结合文本理解并回答问题，仅当模型支持 Vision 能力时可用。
                  items:
                    $ref: "#/components/schemas/FileInput"
                auto_generate_name:
                  type: boolean
                  description: （选填）自动生成标题，默认 `true`。 若设置为 `false`，则可通过调用会话重命名接口并设置 `auto_generate` 为 `true` 实现异步生成标题。
                  default: true
      responses:
        "200":
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatMessage"
            text/event-stream:
              schema:
                $ref: "#/components/schemas/StreamEvent"
        "400":
          $ref: "#/components/responses/Error400"
        "404":
          $ref: "#/components/responses/Error404"
        "500":
          $ref: "#/components/responses/Error500"

  /chat-messages/{task_id}/stop:
    post:
      tags:
        - AdvancedChat
      operationId: stopChatResponseByAppAdvancedChat
      summary: 停止响应
      description: 仅支持流式模式
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
          description: 任务 ID，可在流式返回 Chunk 中获取
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: string
                  description: 用户标识，必须和发送消息接口传入 user 保持一致
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    enum: [success]
                    description: 固定返回 success

  /files/upload:
    post:
      tags:
        - AdvancedChat
      operationId: uploadFileByAppAdvancedChat
      summary: 上传文件
      description: |
        上传文件并在发送消息时使用。
        支持的文件类型取决于应用类型和配置。
        上传的文件仅供当前终端用户使用。
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 要上传的文件
                user:
                  type: string
                  description: 用户标识
              required:
                - file
      responses:
        "200":
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadedFile"
        "400":
          $ref: "#/components/responses/Error400"
        "413":
          description: 文件太大
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "415":
          description: 不支持的文件类型
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "503":
          description: 存储服务错误
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /audio-to-text:
    post:
      tags:
        - AdvancedChat
      operationId: convertAudioToTextByAppAdvancedChat
      summary: 语音转文字
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 语音文件
                  maxLength: 15728640 # 15MB
                user:
                  type: string
                  description: 用户标识
                  example: "user123"
      responses:
        "200":
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  text:
                    type: string
                    description: 转换后的文本

  /text-to-audio:
    post:
      tags:
        - AdvancedChat
      operationId: convertTextToAudioByAppAdvancedChat
      summary: 文字转语音
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message_id:
                  type: string
                  description: 消息ID
                text:
                  type: string
                  description: 待转换文本
                user:
                  type: string
                  description: 用户标识
      responses:
        "200":
          description: 成功响应
          content:
            audio/mpeg:
              schema:
                type: string
                format: binary

  /info:
    get:
      tags:
        - AdvancedChat
      operationId: getApplicationInfoByAppAdvancedChat
      summary: 获取应用基本信息
      responses:
        "200":
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    description: 应用名称
                  description:
                    type: string
                    description: 应用描述
                  tags:
                    type: array
                    items:
                      type: string
                    description: 应用标签

  /parameters:
    get:
      tags:
        - AdvancedChat
      operationId: getApplicationParametersByAppAdvancedChat
      summary: 获取应用参数
      responses:
        "200":
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  opening_statement:
                    type: string
                    description: 开场白
                  suggested_questions:
                    type: array
                    items:
                      type: string
                    description: 开场推荐问题列表
                  suggested_questions_after_answer:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                    description: 回答后推荐问题设置
                  speech_to_text:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                    description: 语音转文本设置
                  retriever_resource:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                    description: 引用和归属设置
                  annotation_reply:
                    type: object
                    description: 标注回复配置
                    properties:
                      enabled:
                        type: boolean
                        description: 是否启用标注回复
                      score_threshold:
                        type: number
                        description: 相似度阈值
                      embedding_model:
                        type: string
                        description: 嵌入模型
                      embedding_model_provider:
                        type: string
                        description: 嵌入模型提供商
                  user_input_form:
                    type: array
                    items:
                      type: object
                    description: 用户输入表单配置
                  file_upload:
                    type: object
                    description: 文件上传配置
                  system_parameters:
                    type: object
                    description: 系统参数

  /messages/{message_id}/feedbacks:
    post:
      tags:
        - AdvancedChat
      operationId: sendMessageFeedbackByAppAdvancedChat
      summary: 消息反馈（点赞）
      description: 消息终端用户反馈、点赞，方便应用开发者优化输出预期。
      parameters:
        - name: message_id
          in: path
          required: true
          schema:
            type: string
          description: 消息 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - rating
                - user
              properties:
                rating:
                  type: string
                  enum: [like, dislike, null]
                  description: 点赞 like, 点踩 dislike, 撤销点赞 null
                user:
                  type: string
                  description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
                content:
                  type: string
                  description: 消息反馈的具体信息。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    enum: [success]
                    description: 固定返回 success

  /messages/{message_id}/suggested:
    get:
      tags:
        - AdvancedChat
      operationId: getSuggestedQuestionsByAppAdvancedChat
      summary: 获取下一轮建议问题列表
      description: 获取下一轮建议问题列表。
      parameters:
        - name: message_id
          in: path
          required: true
          schema:
            type: string
          description: Message ID
        - name: user
          in: query
          required: true
          schema:
            type: string
          description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    enum: [success]
                    description: 固定返回 success
                  data:
                    type: array
                    items:
                      type: string
                    description: 建议问题列表

  /messages:
    get:
      tags:
        - AdvancedChat
      operationId: getConversationMessagesByAppAdvancedChat
      summary: 获取会话历史消息
      description: 滚动加载形式返回历史聊天记录，第一页返回最新 `limit` 条，即：倒序返回。
      parameters:
        - name: conversation_id
          in: query
          required: true
          schema:
            type: string
          description: 会话 ID
        - name: user
          in: query
          required: true
          schema:
            type: string
          description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
        - name: first_id
          in: query
          required: false
          schema:
            type: string
          description: 当前页第一条聊天记录的 ID，默认 null
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
          description: 一次请求返回多少条聊天记录，默认 20 条。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: 消息 ID
                        conversation_id:
                          type: string
                          description: 会话 ID
                        inputs:
                          type: object
                          description: 用户输入参数。
                        query:
                          type: string
                          description: 用户输入 / 提问内容。
                        message_files:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                description: ID
                              type:
                                type: string
                                description: 文件类型，image 图片
                              url:
                                type: string
                                description: 预览图片地址
                              belongs_to:
                                type: string
                                enum: [user, assistant]
                                description: 文件归属方，user 或 assistant
                          description: 消息文件
                        answer:
                          type: string
                          description: 回答消息内容
                        created_at:
                          type: integer
                          description: 创建时间
                        feedback:
                          type: object
                          properties:
                            rating:
                              type: string
                              enum: [like, dislike]
                              description: 点赞 like / 点踩 dislike
                          description: 反馈信息
                        retriever_resources:
                          type: array
                          items:
                            $ref: "#/components/schemas/RetrieverResource"
                          description: 引用和归属分段列表
                    description: 消息列表
                  has_more:
                    type: boolean
                    description: 是否存在下一页
                  limit:
                    type: integer
                    description: 返回条数，若传入超过系统限制，返回系统限制数量

  /conversations:
    get:
      tags:
        - AdvancedChat
      operationId: getConversationsByAppAdvancedChat
      summary: 获取会话列表
      description: 获取当前用户的会话列表，默认返回最近的 20 条。
      parameters:
        - name: user
          in: query
          required: true
          schema:
            type: string
          description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
        - name: last_id
          in: query
          required: false
          schema:
            type: string
          description: （选填）当前页最后面一条记录的 ID，默认 null
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          description: （选填）一次请求返回多少条记录，默认 20 条，最大 100 条，最小 1 条。
        - name: sort_by
          in: query
          required: false
          schema:
            type: string
            enum: [created_at, -created_at, updated_at, -updated_at]
            default: -updated_at
          description: |
            （选填）排序字段，默认 -updated_at(按更新时间倒序排列)
            - 可选值：created_at, -created_at, updated_at, -updated_at
            - 字段前面的符号代表顺序或倒序，-代表倒序
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: 会话 ID
                        name:
                          type: string
                          description: 会话名称，默认由大语言模型生成。
                        inputs:
                          type: object
                          description: 用户输入参数。
                        status:
                          type: string
                          description: 会话状态
                        introduction:
                          type: string
                          description: 开场白
                        created_at:
                          type: integer
                          description: 创建时间
                        updated_at:
                          type: integer
                          description: 更新时间
                    description: 会话列表
                  has_more:
                    type: boolean
                    description: 是否有更多数据
                  limit:
                    type: integer
                    description: 返回条数，若传入超过系统限制，返回系统限制数量

  /conversations/{conversation_id}:
    delete:
      tags:
        - AdvancedChat
      operationId: deleteConversationByAppAdvancedChat
      summary: 删除会话
      description: 删除会话。
      parameters:
        - name: conversation_id
          in: path
          required: true
          schema:
            type: string
          description: 会话 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: string
                  description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    enum: [success]
                    description: 固定返回 success

  /conversations/{conversation_id}/name:
    post:
      tags:
        - AdvancedChat
      operationId: renameConversationByAppAdvancedChat
      summary: 会话重命名
      description: 对会话进行重命名，会话名称用于显示在支持多会话的客户端上。
      parameters:
        - name: conversation_id
          in: path
          required: true
          schema:
            type: string
          description: 会话 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                name:
                  type: string
                  description: （选填）名称，若 `auto_generate` 为 `true` 时，该参数可不传。
                auto_generate:
                  type: boolean
                  default: false
                  description: （选填）自动生成标题，默认 false。
                user:
                  type: string
                  description: 用户标识，由开发者定义规则，需保证用户标识在应用内唯一。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: 会话 ID
                  name:
                    type: string
                    description: 会话名称
                  inputs:
                    type: object
                    description: 用户输入参数
                  status:
                    type: string
                    description: 会话状态
                  introduction:
                    type: string
                    description: 开场白
                  created_at:
                    type: integer
                    description: 创建时间
                  updated_at:
                    type: integer
                    description: 更新时间

  /meta:
    get:
      tags:
        - AdvancedChat
      operationId: getAppMetaInfoByAppAdvancedChat
      summary: 获取应用Meta信息
      description: 用于获取工具icon
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                type: object
                properties:
                  tool_icons:
                    type: object
                    description: 工具图标
                    additionalProperties:
                      oneOf:
                        - type: object
                          properties:
                            background:
                              type: string
                              description: hex格式的背景色
                            content:
                              type: string
                              description: emoji
                        - type: string
                          description: 图标URL

  /apps/annotations:
    get:
      tags:
        - AdvancedChat
      operationId: getAnnotationsListByAppAdvancedChat
      summary: 获取标注列表
      description: 获取应用的标注列表
      parameters:
        - name: page
          in: query
          description: 页码
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: 每页数量
          required: false
          schema:
            type: integer
            default: 20
      responses:
        "200":
          description: 成功获取标注列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: 标注ID
                        question:
                          type: string
                          description: 问题
                        answer:
                          type: string
                          description: 答案
                        hit_count:
                          type: integer
                          description: 命中次数
                        created_at:
                          type: integer
                          description: 创建时间戳
                  has_more:
                    type: boolean
                    description: 是否有更多数据
                  limit:
                    type: integer
                    description: 每页数量
                  total:
                    type: integer
                    description: 总记录数
                  page:
                    type: integer
                    description: 当前页码

    post:
      tags:
        - AdvancedChat
      operationId: createAnnotationByAppAdvancedChat
      summary: 创建标注
      description: 创建新的标注
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - answer
              properties:
                question:
                  type: string
                  description: 问题
                answer:
                  type: string
                  description: 答案
      responses:
        "200":
          description: 成功创建标注
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: 标注ID
                  question:
                    type: string
                    description: 问题
                  answer:
                    type: string
                    description: 答案
                  hit_count:
                    type: integer
                    description: 命中次数
                  created_at:
                    type: integer
                    description: 创建时间戳

  /apps/annotations/{annotation_id}:
    put:
      tags:
        - AdvancedChat
      operationId: updateAnnotationByAppAdvancedChat
      summary: 更新标注
      description: 更新指定的标注
      parameters:
        - name: annotation_id
          in: path
          description: 标注ID
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - answer
              properties:
                question:
                  type: string
                  description: 问题
                answer:
                  type: string
                  description: 答案
      responses:
        "200":
          description: 成功更新标注
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: 标注ID
                  question:
                    type: string
                    description: 问题
                  answer:
                    type: string
                    description: 答案
                  hit_count:
                    type: integer
                    description: 命中次数
                  created_at:
                    type: integer
                    description: 创建时间戳

    delete:
      tags:
        - AdvancedChat
      operationId: deleteAnnotationByAppAdvancedChat
      summary: 删除标注
      description: 删除指定的标注
      parameters:
        - name: annotation_id
          in: path
          description: 标注ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 成功删除标注
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    enum: [success]

  /apps/annotation-reply/{action}:
    post:
      tags:
        - AdvancedChat
      operationId: configureAnnotationReplyByAppAdvancedChat
      summary: 标注回复初始设置
      description: 启用或禁用标注回复功能
      parameters:
        - name: action
          in: path
          description: 动作，只能是 'enable' 或 'disable'
          required: true
          schema:
            type: string
            enum: [enable, disable]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                embedding_model_provider:
                  type: string
                  description: 指定的嵌入模型提供商, 必须先在系统内设定好接入的模型，对应的是provider字段
                embedding_model:
                  type: string
                  description: 指定的嵌入模型，对应的是model字段
                score_threshold:
                  type: number
                  description: 相似度阈值，当相似度大于该阈值时，系统会自动回复，否则不回复
      responses:
        "200":
          description: 成功启用或禁用标注回复
          content:
            application/json:
              schema:
                type: object
                properties:
                  job_id:
                    type: string
                    description: 任务ID
                  job_status:
                    type: string
                    description: 任务状态

  /apps/annotation-reply/{action}/status/{job_id}:
    get:
      tags:
        - AdvancedChat
      operationId: getAnnotationReplyStatusByAppAdvancedChat
      summary: 查询标注回复初始设置任务状态
      description: 查询标注回复初始设置任务的执行状态
      parameters:
        - name: action
          in: path
          description: 动作，只能是 'enable' 或 'disable'，并且必须和标注回复初始设置接口的动作一致
          required: true
          schema:
            type: string
            enum: [enable, disable]
        - name: job_id
          in: path
          description: 任务ID，从标注回复初始设置接口返回的job_id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 成功获取任务状态
          content:
            application/json:
              schema:
                type: object
                properties:
                  job_id:
                    type: string
                    description: 任务ID
                  job_status:
                    type: string
                    description: 任务状态
                  error_msg:
                    type: string
                    description: 错误信息